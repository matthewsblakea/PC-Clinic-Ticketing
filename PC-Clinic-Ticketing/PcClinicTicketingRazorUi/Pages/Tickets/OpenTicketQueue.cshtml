@page
@using PcClinicTicketingRazorUi.Models
@model PcClinicTicketingRazorUi.Pages.Tickets.OpenTicketQueue
@{
}

<h3>Ticket Queue</h3>
Click Ticket Id for prior repair logs. Add repair log for each repair act or customer contact performed. Open tickets are removed from list when status is changed to 'Closed.'
<table>
    <thead>
        <tr>
            <th>Ticket Id</th>
            <th>Device Id</th>
            <th>Reported problem</th>
            <th>Intake notes</th>
            <th>Ticket type</th>
            <th>Repair status</th>
            <th>Ticket time</th>
            <th></th>
            <th></th>
        </tr>
    </thead>
    @foreach (Ticket ticket in Model.tickets)
    {

        <tbody>
            <tr>
                <td><a asp-page="/RepairLogs/GetRepairLogsByTicketId" asp-route-id="@ticket.TicketId">@ticket.TicketId</a></td>
                <td>@ticket.DeviceId</td>
                <td>@ticket.ReportedProblem</td>
                <td>@ticket.TechIntakeNotes</td>
                <td>@ticket.TicketType</td>
                <td>@ticket.RepairStatus</td>
                <td>@ticket.TicketTime</td>
                <td><a asp-page="/Tickets/EditTicket" asp-route-id="@ticket.TicketId">Edit ticket</a></td>
                <td><a asp-page="/RepairLogs/CreateRepairLog">Add repair log</a></td>
            </tr>
        </tbody>
    }
</table>